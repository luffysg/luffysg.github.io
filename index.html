<!DOCTYPE html>
<html>

<head>
    <title>CS498 Data Visualization Homework 7-3-3 Create a Narrative Visualization </title>
    <script src='https://d3js.org/d3.v5.min.js'> </script>
</head>


<div class="container-fluid">
        <h2>CS498 Data Visualization</h2>
        <h2>Homework 7-3-3 Create a Narrative Visualization</h2>
        <br/><br/>
        <h2>Average City and highway MPG for 2017 automobile manufacturers</h2>
</div>

<div class="container-fluid">
        <p>This graph shows the correlation of average highway MPG to average city MPG. 
            And the circle size represents number of engine cylinders </p>
        <br/>
        <h3>Average highway MPG vs. average city MPG by number of engine cyclinders</h3>
        <svg id="scene1">
        </svg>
</div>


<div class="container-fluid">
        <p>This graph shows the correlation of average highway MPG to average city MPG. 
            And each color represents one fuel type </p>
        <br/>
        <h3>Average highway MPG vs. average city MPG by fuel type</h3>
        <svg id="scene2">
        </svg>
</div>

<div class="container-fluid">
        <p>This graph shows the correlation of average highway MPG to average city MPG.
            And each color represents one manufacturers
        </p>
        <br/>
        <h3>Average highway MPG vs. average city MPG by manufacturers</h3>
        <svg id="scene3">
        </svg>
</div>

<script>
// set margins for svgs
var margin = {top: 30, right: 30, bottom: 30, left: 30},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;


//scene 1 is the Avg HW MPG vs Avg City MPG by engine cylinders
var svg1 = d3.select("#scene1")
             .attr("width", width + margin.left + margin.right)
             .attr("height", height + margin.top + margin.bottom)
             .append("g")
             .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
//scene 1 is the Avg HW MPG vs Avg City MPG by fuel type
var svg2 = d3.select("#scene2")
             .attr("width", width + margin.left + margin.right)
             .attr("height", height + margin.top + margin.bottom)
             .append("g")
             .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
//scene 1 is the Avg HW MPG vs Avg City MPG by manufacturers
var svg3 = d3.select("#scene3")
             .attr("width", width + margin.left + margin.right)
             .attr("height", height + margin.top + margin.bottom)
             .append("g")
             .attr("transform", "translate(" + margin.left + "," + margin.top + ")");




//load data
d3.csv("https://flunky.github.io/cars2017.csv", function(error, data) {
  if (error) throw error;
  data.forEach(function(d) {
    d.Make = +d.Make;
    d.Fuel = +d.Fuel;
    d.EngineCylinders = +d.EngineCylinders;
    d.AverageHighwayMPG = +d.AverageHighwayMPG;
    d.AverageCityMPG = +d.AverageCityMPG;
  });

//scale data
var xScale = d3.scaleLog().domain([10,150]).range([0, width]);
var yScale = d3.scaleLinear().domain([10,150]).range([height, 0]);


/* svg1.selectAll(".dot")
      .data(data)
      .enter().append("circle")
      .attr("class", "dot")
      .attr("cx", function(d) { return xScale(d.AverageCityMPG); })
      .attr("cy", function(d) { return yScale(d.AverageHighwayMPG); })
      .attr("r", function(d) {return d.EngineCylinders ;})
//      .attr("stroke-width", 1)
//      .attr("stroke", "black")
//      .style("fill", function(d) { return colorScale(d.Mobile_Subs_Per_Hundred); });

svg1.append("g")
    .attr("transform", "translate(" +(margin) + "," + (margin) + ")")
    .call(d3.axisLeft(yScale).tickValues([10,20,50,100]).tickFormat(d3.format("~s")))
    .attr("text-anchor", "end") ;
svg1.append("g")
    .attr("transform", "translate(" +margin + "," + (margin+height) + ")")
    .call(d3.axisBottom(xScale).tickValues([10,20,50,100]).tickFormat(d3.format("~s")))
    .attr("text-anchor", "middle"); */


svg3.selectAll(".dot")
      .data(data)
      .enter().append("circle")
      .attr("class", "dot")
      .attr("cx", function(d) { return xScale(d.AverageCityMPG); })
      .attr("cy", function(d) { return yScale(d.AverageHighwayMPG); })
      .attr("r", 4)
      .attr("stroke-width", 1)
      .attr("stroke", "black")
      //.style("fill", function(d) { return colorScale(d.Mobile_Subs_Per_Hundred); });
svg3.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(xScale).ticks(5,d3.format("0.1s")));
svg3.append("g")
      .call(d3.axisLeft(yScale));

</script>
<body>
<h1>Hello World</h1>
<p>I'm hosted with Github Pages. </p>
</body>
</html>